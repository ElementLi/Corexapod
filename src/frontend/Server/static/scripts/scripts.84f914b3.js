"use strict";angular.module("corexapodControllerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("corexapodControllerApp").controller("MainCtrl",["$scope","$http",function(a,b){jQuery("li.active").removeClass("active"),jQuery('a[ng-href="#"]').parent("li").addClass("active"),jQuery("table a").click(function(){var a=jQuery(this).attr("href");if("/act/autoenable"==a)jQuery(this).attr("href","/act/autodisable").html('<span class="glyphicon glyphicon-stop"></span>');else if("/act/autodisable"==a)jQuery(this).attr("href","/act/autoenable").html('<span class="glyphicon glyphicon-play"></span>');else if("/act/reboot"==a||"/act/poweroff"==a){var c=confirm("确认关机或重启？");if(1!=c)return!1}return jQuery("table a").addClass("disabled"),jQuery("#info").addClass("alert-warning"),b.get(a).success(function(){jQuery("#info").removeClass("alert-warning"),jQuery("table a").removeClass("disabled"),jQuery("#info").removeClass("alert-warning").removeClass("alert-danger").text("等待用户指令")}).error(function(){jQuery("#info").removeClass("alert-warning").addClass("alert-danger").text("连接丢失或机器人无响应"),jQuery("table a").removeClass("disabled")}),!1});var c=!1,d=function(){b.get("/act/status").success(function(b){jQuery("#info").removeClass("alert-warning").removeClass("alert-danger").text("等待用户指令"),a.battery=b.battery,jQuery(".progress-bar").css("width",b.battery);var d=parseInt(b.battery.replace("%",""));18>=d&&(c||(alert("电量不足"),c=!0),jQuery("#info").addClass("alert-danger").text("电量不足"),jQuery(".progress-bar").addClass("progress-bar-danger")),a.totalUseTime=b.totalUseTime,a.powerCycle=b.powerCycle}).error(function(){jQuery("#info").removeClass("alert-warning").addClass("alert-danger").text("连接丢失或机器人无响应")})};window.setInterval(d,6e4),window.setTimeout(function(){jQuery(document.body).animate({scrollTop:jQuery("#info").offset().top},1e3)},3e3),d()}]),angular.module("corexapodControllerApp").controller("AboutCtrl",["$scope",function(){jQuery("li.active").removeClass("active"),jQuery('a[ng-href="#/about"]').parent("li").addClass("active")}]);